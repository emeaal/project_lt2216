(this.webpackJsonpspeechstate=this.webpackJsonpspeechstate||[]).push([[0],{170:function(t,e,o){},218:function(t,e){},357:function(t,e){},360:function(t,e){},364:function(t,e){},365:function(t,e){},366:function(t,e){},367:function(t,e){},368:function(t,e){},456:function(t,e,o){"use strict";o.r(e);var n=o(166),r=o(3),a=(o(170),o(15),o(159)),c=o(26),i=o(94),u=o(4),s=o(459),l=o(460),d={"A forest.":{background:"https://nordicforestresearch.org/wp-content/uploads/2020/05/forest-4181023_1280.jpg"},"Forest.":{background:"https://nordicforestresearch.org/wp-content/uploads/2020/05/forest-4181023_1280.jpg"},"Leave.":{background:"https://thumbs.dreamstime.com/b/crossroads-forest-3448364.jpg"},Leave:{background:"https://thumbs.dreamstime.com/b/crossroads-forest-3448364.jpg"},"I want to leave.":{background:"https://thumbs.dreamstime.com/b/crossroads-forest-3448364.jpg"},"I change my mind.":{background:"https://thumbs.dreamstime.com/b/crossroads-forest-3448364.jpg"},"I changed my mind.":{background:"https://thumbs.dreamstime.com/b/crossroads-forest-3448364.jpg"},"Changed my mind":{background:"https://thumbs.dreamstime.com/b/crossroads-forest-3448364.jpg"},"Change your mind.":{background:"https://thumbs.dreamstime.com/b/crossroads-forest-3448364.jpg"},"A beach.":{background:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/11/cd/51/9b/seven-mile-beach.jpg?w=1200&h=-1&s=1"},"Beach.":{background:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/11/cd/51/9b/seven-mile-beach.jpg?w=1200&h=-1&s=1"},"Cave.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"To The Cave.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"River.":{background:"https://jooinn.com/images/river-in-forest-1.jpg"},"Yes.":{background:"https://jooinn.com/images/river-in-forest-1.jpg"},"No.":{background:"https://jooinn.com/images/river-in-forest-1.jpg"},"South.":{background:"https://jooinn.com/images/river-in-forest-1.jpg"},"To the South.":{background:"https://jooinn.com/images/river-in-forest-1.jpg"},"Go down South.":{background:"https://jooinn.com/images/river-in-forest-1.jpg"},"To the river.":{background:"https://jooinn.com/images/river-in-forest-1.jpg"},"Offer money.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Give them money":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Give it money.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Offer it money.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"To the left.":{background:"https://jooinn.com/images/river-in-forest-1.jpg"},"To the right.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Up north.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Go north.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"To the north.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Acorns.":{background:"https://wallpaperaccess.com/full/4101978.jpg"},"Find acorns.":{background:"https://wallpaperaccess.com/full/4101978.jpg"},"Find some acorns":{background:"https://wallpaperaccess.com/full/4101978.jpg"},"Find some acorns.":{background:"https://wallpaperaccess.com/full/4101978.jpg"},"Try to find acorns":{background:"https://wallpaperaccess.com/full/4101978.jpg"},"Try to look for acorns.":{background:"https://wallpaperaccess.com/full/4101978.jpg"},"Look for acorns.":{background:"https://wallpaperaccess.com/full/4101978.jpg"},"Try another path.":{background:"https://i.imgur.com/WCrueUG.jpg"},"Try to find another path.":{background:"https://i.imgur.com/WCrueUG.jpg"},"Take another path.":{background:"https://i.imgur.com/WCrueUG.jpg"},"Find another path.":{background:"https://i.imgur.com/WCrueUG.jpg"},"Go on another path.":{background:"https://i.imgur.com/WCrueUG.jpg"},"Try to go on another path.":{background:"https://i.imgur.com/WCrueUG.jpg"},"Another path.":{background:"https://i.imgur.com/WCrueUG.jpg"},"Money.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Give it the money.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Try to offer it the money.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Offer it the money.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Offer the money.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Offer money to it.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Try to give it the money.":{background:"https://i.imgur.com/LN6RQOJ.jpg"},"Go inside.":{background:"https://i.imgur.com/pqnAabX.jpg"},"I go inside.":{background:"https://i.imgur.com/pqnAabX.jpg"},"Inside.":{background:"https://i.imgur.com/pqnAabX.jpg"},"Go inside The Cave.":{background:"https://i.imgur.com/pqnAabX.jpg"},"I go inside The Cave.":{background:"https://i.imgur.com/pqnAabX.jpg"}},h="https://esquilo.io/wallpaper/wallpaper/20210704/black-wallpaper-plain-plain-black-desktop-wallpapers-on-wallpaperdog-preview.webp",g=Object(u.q)((function(t){return{type:"SPEAK",value:"You're right. It does seem to be a ".concat(t.place)}}));function p(t){return Object(u.q)((function(e){return{type:"SPEAK",value:t(e)}}))}function m(t){return{initial:"prompt",states:{prompt:{entry:p((function(){return t}))}}}}function f(t){return{initial:"prompt",states:{prompt:{entry:[p((function(){return t})),Object(u.b)({promptcounter:function(t){return t.promptcounter=0}})],on:{ENDSPEECH:"ask"}},ask:{entry:Object(u.q)("LISTEN")},hist:{type:"history",history:"deep"}}}}var b=["What did you say?","Can you speak up?","Maybe work on your enunciation.","Am I deaf or did you mumble?","What was that?","Are you shy, or what?","Don't be shy.","Are you eating and speaking?","Take a breath and try again.","Are you slow?","Could you repeat that?"],y=["Didn't you pay attention to the rules?","I don't think it is so hard to figure out.","Think harder.","Let me say that again.","You have a short memory it seems.","Are you slow?"],k=["Oops, you lost a life","Oh no! You lost a life","Oops, this was definitely not the right path to search for your wallet. You lost a life","Well, this was a wrong turn. You lost a life.","You should be searching for your wallet, not finding ways to die","Unfortunately this was not what you expected, you lost a life","Good job! You lost a life.","Nice! One step closer to death. You lost a life."],v={"Stop.":{stop:"Stop"},"Shut up.":{stop:"Stop"},"I don't want to play anymore.":{stop:"Stop"},"End game.":{stop:"Stop"},"Quit game.":{stop:"Stop"},"Quit playing.":{stop:"Stop"},"End the game.":{stop:"Stop"}},E={forest:["A forest.","Forest.","It's a forest."],beach:["A beach.","Beach","It's a beach.","I think it's a beach","Beach."],boat:["Boat."],tree:["Palm tree","Tree.","Tree","3.","Three.","Three","Trees."],cave:["Cave.","Go to the cave","To The Cave"],acorns:["Acorns.","Acorns","Find some acorns","Find some acorns.","Find acorns.","Try to find acorns","Try to look for acorns.","Look for acorns."],shake:["Shake.","Shake it.","Shake the tree.","Try to shake it."],climb:["Climb.","Climb it.","Climb the tree.","Try to climb it."],left:["Left.","Left","To the left.","To the left one.","The left one.","I want to go to the left.","The left troll.","To the left troll."],right:["Right.","To the right.","The right one.","To the right one.","I want to go to the right.","The right troll.","To the right troll.","Right?"],leave:["Leave.","I want to leave.","Leave","Live"],money:["Money.","Offer money.","Offer it money","Try to offer it money","Offer money to it","Give them money","Give it the bill.","Give it the money.","Try to give it the bill.","Try to give it the money.","Bill"],help:["Help.","What should I do?.","I don't know what to do.","The right troll.","To the right troll."],steal:["Steal.","Steal the acorns.","Steal them.","Try to steal.","Try to steal them."],talk:["Try to talk to the trolls.","Talk to the trolls.","Try to talk to the trolls again.","Talk to the trolls again.","Talk.","Talk"],path:["Try another path.","Find another path.","Try to find another path.","Take another path.","Go on another path.","Try to go on another path.","Another path.","Another path"],else:["Go somewhere else.","I want to go somewhere else."],wait:["Wait.","Wait here.","Let's wait.","Let's wait a bit.","Wait a bit.","Wait?"],shout:["Shout.","Shout profanities.","Shout at it.","Shout profanities at it."],cross:["Cross.","Cross the river.","Try to cross.","Try to cross the river."],yes:["Yes."],no:["No."],lure:["Try to lure it.","Lure it.","Lure.","Lure","I want to lure it"],take:["Take the wallet.","Try to take the wallet.","Take it.","Try to take it."],change:["I change my mind.","I changed my mind.","Changed my mind","Change your mind."],inside:["Go inside.","I go inside.","Inside.","Go inside The Cave.","I go inside The Cave."],buy:["Buy an ice cream.","Buy.","I buy an ice cream."]},j={initial:"idle",entry:Object(u.b)({lifecounter:function(t){return t.lifecounter=3}}),states:{idle:{on:{CLICK:"init"}},init:{entry:[Object(u.b)({background:function(t){return t.background="https://c.pxhere.com/images/6e/62/14ec0e80e4a8bfd7510e8745c88f-1628448.jpg!d"}})],on:{TTS_READY:"voicegameapp",CLICK:"voicegameapp"}},noMatch:{initial:"notmatched",states:{notmatched:{entry:p((function(){return b[Math.floor(Math.random()*b.length)]})),on:{ENDSPEECH:"backgroundChanger"}},backgroundChanger:{entry:["changeBackground"],always:"#root.dm.voicegameapp.histforask"}}},getHelp:{initial:"helpmessage",states:{helpmessage:{entry:p((function(){return y[Math.floor(Math.random()*y.length)]})),on:{ENDSPEECH:"#root.dm.voicegameapp.histforask"}}}},endofgame:{initial:"entry",on:{RECOGNISED:[{target:".twolivesleft",cond:function(t){return 2===t.lifecounter}},{target:".onelifeleft",cond:function(t){return 1===t.lifecounter}},{target:".end",cond:function(t){return 0===t.lifecounter}},{target:"#root.dm.noMatch"}]},states:{entry:{always:[{target:"twolivesleft",cond:function(t){return 2===t.lifecounter}},{target:"onelifeleft",cond:function(t){return 1===t.lifecounter}},{target:"end",cond:function(t){return 0===t.lifecounter},actions:Object(u.b)({background:function(t){return t.background=h}})}]},end:{entry:[p((function(){return"You ran out of lives. You died."})),"changeBackground"],on:{ENDSPEECH:"#root.dm.idle"}},twolivesleft:{entry:p((function(){return k[Math.floor(Math.random()*k.length)]})),on:{ENDSPEECH:"telltwolives"}},telltwolives:{entry:p((function(t){return"You still have ".concat(t.lifecounter," lives left. You can continue your game from the nearest checkpoint.")})),on:{ENDSPEECH:"#root.dm.voicegameapp.hist"}},onelifeleft:{entry:p((function(){return k[Math.floor(Math.random()*k.length)]})),on:{ENDSPEECH:"tellonelife"}},tellonelife:{entry:p((function(t){return"You still have ".concat(t.lifecounter," life left. You can continue your game from the nearest checkpoint.")})),on:{ENDSPEECH:"#root.dm.voicegameapp.hist"}}}},endofgamebeach:{initial:"entry",on:{RECOGNISED:[{target:".twolivesleft",cond:function(t){return 2===t.lifecounter}},{target:".onelifeleft",cond:function(t){return 1===t.lifecounter}},{target:".end",cond:function(t){return 0===t.lifecounter}},{target:"#root.dm.noMatch"}]},states:{entry:{always:[{target:"twolivesleft",cond:function(t){return 2===t.lifecounter},actions:Object(u.b)({background:function(t){return t.background="https://c.pxhere.com/images/6e/62/14ec0e80e4a8bfd7510e8745c88f-1628448.jpg!d"}})},{target:"onelifeleft",cond:function(t){return 1===t.lifecounter},actions:Object(u.b)({background:function(t){return t.background="https://c.pxhere.com/images/6e/62/14ec0e80e4a8bfd7510e8745c88f-1628448.jpg!d"}})},{target:"end",cond:function(t){return 0===t.lifecounter},actions:Object(u.b)({background:function(t){return t.background=h}})}]},end:{entry:[p((function(){return"You ran out of lives. You died."})),"changeBackground"],on:{ENDSPEECH:"#root.dm.idle"}},twolivesleft:{entry:[p((function(t){return"You still have ".concat(t.lifecounter," lives left. Try finding the right path. Where should you go?")})),"changeBackground"],on:{ENDSPEECH:"#root.dm.voicegameapp.welcome.hist"}},onelifeleft:{entry:[p((function(t){return"You still have ".concat(t.lifecounter," life left. Try finding the right path. Where should you go?")})),"changeBackground"],on:{ENDSPEECH:"#root.dm.voicegameapp.welcome.hist"}}}},voicegameapp:{initial:"hello",entry:"changeBackground",states:{hist:{type:"history",history:"shallow"},histforask:{type:"history",history:"deep"},stop:{entry:p((function(){return"Ok. Thanks for playing"})),always:"#root.dm.idle"},hello:{entry:p((function(){return"Hello! And welcome to our game, The Lost Wallet. Before we begin, I am going to explain the rules to you. After a night of partying, you realise you have lost your wallet under curious circumstances. You have to navigate an unknown territory in order to find it, and be very careful to the choices you are presented with. You have three lives. When you die, you respawn to the nearest checkpoint, but if you lose all of them, it's game over. You have nothing with you except for two 5 euros bills. Good luck and have fun!"})),on:{ENDSPEECH:"welcome"}},welcome:Object(r.a)({initial:"prompt",on:{RECOGNISED:[{target:"forest",cond:function(t){return t.recResult[0].utterance.includes("forest")},actions:Object(u.b)({background:function(t){return d["Forest."].background}})},{target:"beach",cond:function(t){return t.recResult[0].utterance.includes("beach")},actions:Object(u.b)({background:function(t){return d["Beach."].background}})},{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."}},f("You wake up and find yourself in a strange place. But you can't quite tell where. I think you have something in your eyes. Could it be a forest\u2026or more like a beach? What do you think it is? ")),forest:{initial:"sayforest",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"cave",cond:function(t){return t.recResult[0].utterance.includes("Cave")},actions:Object(u.b)({background:function(t){return d["Cave."].background}})},{target:"river1",cond:function(t){return t.recResult[0].utterance.includes("river")},actions:Object(u.b)({background:function(t){return d["River."].background}})},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{sayforest:{entry:[Object(u.b)({place:function(t){return t.place="forest"}}),g],on:{ENDSPEECH:"backgroundChanger"}},backgroundChanger:{entry:["changeBackground"],always:"tellforeststory"},tellforeststory:Object(r.a)({},f("Down south you hear a river flowing, and up north there's a cave. Where would you like to go?"))}},cave:{initial:"cavestory",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"#root.dm.endofgame",cond:function(t){return E.leave.includes(t.recResult[0].utterance)}},{target:"left_troll",cond:function(t){return t.recResult[0].utterance.includes("left")}},{target:".right_troll",cond:function(t){return E.right.includes(t.recResult[0].utterance)}},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{cavestory:Object(r.a)(Object(r.a)({},m("You make your way to the cave.")),{},{on:{ENDSPEECH:"backgroundChanger"}}),backgroundChanger:{entry:["changeBackground"],always:"cavealternatives"},cavealternatives:Object(r.a)({},f("In front of it there are two trolls, but they don't say anything. Which one do you adress?")),right_troll:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"You get hit in the head with a bat. Turns out, the one you talked to was the second in command. The older brother wants people to recognise he's in charge and you upset him."})),Object(u.b)({lifecounter:function(t){return t.lifecounter-1}})],on:{ENDSPEECH:"#root.dm.endofgame"}}}}}},left_troll:{initial:"cavestory",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"leave",cond:function(t){return t.recResult[0].utterance.includes("leave")},actions:Object(u.b)({background:function(t){return d["Leave."].background}})},{target:"offer_money_trolls",cond:function(t){return t.recResult[0].utterance.includes("money")}},{target:"lookforacorns",cond:function(t){return t.recResult[0].utterance.includes("acorns")},actions:Object(u.b)({background:function(t){return d["Acorns."].background}})},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{cavestory:Object(r.a)(Object(r.a)({},m("The troll tells you that for the small price of 10 acorns, they can let you inside the cave")),{},{on:{ENDSPEECH:"cavealternatives"}}),cavealternatives:Object(r.a)({},f("You can leave, offer them money or look for acorns."))}},offer_money_trolls:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"leave",cond:function(t){return t.recResult[0].utterance.includes("leave")},actions:Object(u.b)({background:function(t){return d["Leave."].background}})},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"lookforacorns",cond:function(t){return t.recResult[0].utterance.includes("acorn")},actions:Object(u.b)({background:function(t){return d["Acorns."].background}})},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("You say you don't have acorns, but you have two 5 euros bills in your pocket. The trolls laugh.")),{},{on:{ENDSPEECH:"cavealternatives"}}),cavealternatives:Object(r.a)({},f("You can either leave or look for some acorns."))}},leave:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"river1",cond:function(t){return E.left.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d["River."].background}})},{target:"backtocave",cond:function(t){return E.right.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d["Cave."].background}})},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("You don't have time for that, you need to find your wallet, and these trolls definitely don't have it.  You turn around and wander for a bit. You arrive at a crossroads.")),{},{on:{ENDSPEECH:"backgroundChanger"}}),backgroundChanger:{entry:["changeBackground"],always:"wander"},wander:Object(r.a)(Object(r.a)({},f("Do you go to the right or to the left?")),{},{on:{ENDSPEECH:"#root.dm.init"}})}},backtocave:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"talktotrolls",cond:function(t){return E.talk.includes(t.recResult[0].utterance)}},{target:"anotherpath",cond:function(t){return E.path.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d[t.recResult[0].utterance].background}})},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("You just walked in a circle and now you're back at the cave. I see your orientation skills aren't the best.")),{},{on:{ENDSPEECH:"backgroundChanger"}}),backgroundChanger:{entry:["changeBackground"],always:"wander"},wander:Object(r.a)(Object(r.a)({},f("Do you try to talk to the trolls again or find another path?")),{},{on:{ENDSPEECH:"#root.dm.init"}})}},talktotrolls:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:".trollskill",cond:function(t){return E.talk.includes(t.recResult[0].utterance)}},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"anotherpath",cond:function(t){return E.path.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d[t.recResult[0].utterance].background}})},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("The trolls don't want to waste their time with you again. You should find another path before they get too mad. Or you could try again. But I wouldn't personally recommend that.")),{},{on:{ENDSPEECH:"choices"}}),choices:Object(r.a)(Object(r.a)({},f("So what will it be?")),{},{on:{ENDSPEECH:"trollskill"}}),trollskill:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"I don't know why you won't listen to me. The trolls have had enough of you. They club you to death."})),Object(u.b)({lifecounter:function(t){return t.lifecounter-1}})],on:{ENDSPEECH:"#root.dm.endofgame"}}}}}},anotherpath:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.voicegameapp.river2",cond:function(t){return E.yes.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d[t.recResult[0].utterance].background}})},{target:".what",cond:function(t){return E.no.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d[t.recResult[0].utterance].background}})},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("You're back to that crossroads again.")),{},{on:{ENDSPEECH:"backgroundChanger"}}),backgroundChanger:{entry:["changeBackground"],always:"omg"},omg:Object(r.a)({},f("Omg, Look! A squirrel has your wallet. Do you want to chase it?")),what:Object(r.a)(Object(r.a)({},m("What do you mean, no? We're chasing it. Come on.")),{},{on:{ENDSPEECH:"#root.dm.voicegameapp.river2"}})}},river2:{initial:"prompt",states:{prompt:Object(r.a)(Object(r.a)({},m("It led you to the river.")),{},{on:{ENDSPEECH:"backgroundChanger"}}),backgroundChanger:{entry:["changeBackground"],always:"#root.dm.voicegameapp.squirrelriver"}}},river1:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:".somewhere_else",cond:function(t){return E.else.includes(t.recResult[0].utterance)}},{target:"#root.dm.voicegameapp.river1.wait",cond:function(t){return E.wait.includes(t.recResult[0].utterance)}},{target:"#root.dm.voicegameapp.river1.look"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("You get to a river.")),{},{on:{ENDSPEECH:"backgroundChanger"}}),backgroundChanger:{entry:["changeBackground"],always:"ask"},ask:Object(r.a)({},f("Not much to see here actually. Do you want to wait here for a bit, or go somewhere else?")),somewhere_else:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"Ugh I don't know about that. I mean, you just got here but I also work on the alternative paths and it's been a long way to get here from the cave. I'm a bit tired."}))],on:{ENDSPEECH:"#root.dm.voicegameapp.river1.wait"}}}},wait:{initial:"sayprompt",states:{sayprompt:Object(r.a)(Object(r.a)({},m("Let's wait then. So have you seen a good movie lately? ")),{},{on:{ENDSPEECH:"ask"}}),ask:{entry:Object(u.q)("LISTEN")}}},look:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"Nevermind! Look! A squirrel has your wallet! Do something!"}))],on:{ENDSPEECH:"#root.dm.voicegameapp.squirrelriver"}}}}}},squirrelriver:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"#root.dm.voicegameapp.squirrelriver.cross",cond:function(t){return t.recResult[0].utterance.includes("cross")}},{target:"#root.dm.voicegameapp.squirrelriver.shout",cond:function(t){return E.shout.includes(t.recResult[0].utterance)}},{target:"#root.dm.voicegameapp.lure",cond:function(t){return E.lure.includes(t.recResult[0].utterance)||t.recResult[0].utterance.includes("river")}},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("The squirrel crosses the river before you can reach it.")),{},{on:{ENDSPEECH:"ask"}}),ask:Object(r.a)({},f("Do you try to: cross the river, shout profanities at the squirrel, or try to lure it with money?")),cross:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"You try to cross the river but you lose your balance and you fall in it. You drown."})),Object(u.b)({lifecounter:function(t){return t.lifecounter-1}})],on:{ENDSPEECH:"#root.dm.endofgamebeach"}}}},shout:{initial:"sayprompt",states:{sayprompt:{entry:p((function(){return"Out of frustration you shout some pretty heavy stuff at the squirrel. I guess somehow it understood you, because it throws your wallet in the river. Nice job genius. You lose the game, your wallet is gone forever."})),on:{ENDSPEECH:"#root.dm.init"}}}}}},lure:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"#root.dm.voicegameapp.ending1",cond:function(t){return E.money.includes(t.recResult[0].utterance)}},{target:"#root.dm.voicegameapp.ending2",cond:function(t){return E.take.includes(t.recResult[0].utterance)}},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("You whip out your shiny bill and wave it around. The squirrel is immediately attracted to it and crosses the river back to you.")),{},{on:{ENDSPEECH:"ask"}}),ask:Object(r.a)({},f("Do you try to give it the bill in exchange for your wallet, or try to take it forcibly?"))}},ending1:{initial:"prompt",states:{prompt:Object(r.a)(Object(r.a)({},m("The squirrel actually takes the bill and gives you the wallet. Dumb squirrel, you think to yourself, but then again, how could it know the difference between a lot of money and a few? Maybe it just likes the color green more. Congratulations! You have won the game! And it seems like the squirrel has offered to help lead you out of the forest and find your way home. I think you're in good hands. Goodbye and congratulations!")),{},{on:{ENDSPEECH:"#root.dm.init"}})}},ending2:{initial:"prompt",states:{prompt:Object(r.a)(Object(r.a)({},m("I didn't think you could do it, but you really are trying to fight this squirrel. It's suspiciously strong too. After a good tussle, you manage to rip your wallet out of its grasp. The squirrel scratches at your face one last time and scurries away. Congratulations! You're now left alone, with your wallet but no idea of how to get back home. I think you're on your own with this one, buddy. Goodbye.")),{},{on:{ENDSPEECH:"#root.dm.init"}})}},lookforacorns:{initial:"sayacorns",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:".shake_tree",cond:function(t){return E.shake.includes(t.recResult[0].utterance)}},{target:"climb_tree",cond:function(t){return E.climb.includes(t.recResult[0].utterance)}},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{sayacorns:Object(r.a)(Object(r.a)({},m("You leave and find an oak.")),{},{on:{ENDSPEECH:"backgroundChanger"}}),backgroundChanger:{entry:["changeBackground"],always:"tellforeststory"},tellforeststory:Object(r.a)({},f("Do you shake it or try to climb it?")),shake_tree:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"You shake the tree as hard as you can. A squirrel falls down and scratches at your eyes. The damage is so bad that you eventually die. Sorry."})),Object(u.b)({lifecounter:function(t){return t.lifecounter-1}})],on:{ENDSPEECH:"#root.dm.endofgame"}}}}}},climb_tree:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:".steal",cond:function(t){return E.steal.includes(t.recResult[0].utterance)}},{target:".offermoneysquirrel",cond:function(t){return E.money.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d[t.recResult[0].utterance].background}})},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("You climb the tree and find a squirrel's nest, with exactly 10 acorns.")),{},{on:{ENDSPEECH:"climbchoices"}}),climbchoices:Object(r.a)({},f("Do you try to steal them or try to give the squirrel 5 euros?")),steal:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"Did you really think you would survive this? The squirrel immediately takes its revenge."})),Object(u.b)({lifecounter:function(t){return t.lifecounter-1}})],on:{ENDSPEECH:"#root.dm.endofgame"}}}},offermoneysquirrel:{initial:"prompt",states:{prompt:Object(r.a)(Object(r.a)({},m("The squirrel accepts the transaction. You now have the acorns and go back to the trolls, but you wonder why a squirrel needs money.")),{},{on:{ENDSPEECH:"backgroundChanger"}}),backgroundChanger:{entry:["changeBackground"],always:"#root.dm.voicegameapp.cave2"}}}}},cave2:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:"insidecave",cond:function(t){return E.inside.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d[t.recResult[0].utterance].background}})},{target:"#root.dm.voicegameapp.leave",cond:function(t){return E.change.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d[t.recResult[0].utterance].background}})},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:Object(r.a)(Object(r.a)({},m("You give the trolls the 10 acorns.")),{},{on:{ENDSPEECH:"choices"}}),choices:Object(r.a)({},f("Do you go inside the cave or do you change your mind?"))}},insidecave:{initial:"prompt",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:".buy",cond:function(t){return E.buy.includes(t.recResult[0].utterance)}},{target:"#root.dm.voicegameapp.leave",cond:function(t){return E.leave.includes(t.recResult[0].utterance)},actions:Object(u.b)({background:function(t){return d[t.recResult[0].utterance].background}})},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{prompt:{entry:p((function(){return"You are now inside the cave."})),on:{ENDSPEECH:"backgroundChanger"}},backgroundChanger:{entry:["changeBackground"],always:[{target:"inside"}]},inside:Object(r.a)({},f("Out of all the things you expected to see here, you find the unexpected. There's an ice cream stand inside the cave. Do you buy an ice cream or leave?")),buy:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"You buy a strawberry ice cream with the 5 euros you had left, but you unexpectedly lose a life. Weird. "})),Object(u.b)({lifecounter:function(t){return t.lifecounter-1}})],on:{ENDSPEECH:"#root.dm.endofgame"}}}}}},beach:{initial:"saybeach",on:{RECOGNISED:[{target:"#root.dm.getHelp",cond:function(t){return E.help.includes(t.recResult[0].utterance)}},{target:".boat",cond:function(t){return t.recResult[0].utterance.includes("boat")||t.recResult[0].utterance.includes("left")}},{target:".palm_tree",cond:function(t){return t.recResult[0].utterance.includes("tree")||t.recResult[0].utterance.includes("right")}},{target:"stop",cond:function(t){return"stop"in(v[t.recResult[0].utterance]||{})}},{target:"#root.dm.noMatch"}],TIMEOUT:".."},states:{saybeach:{entry:p((function(){return"It definitely looked like a forest to me, but if you say so, sure. It is a beach."})),on:{ENDSPEECH:"backgroundChanger"}},backgroundChanger:{entry:["changeBackground"],always:[{target:"tellbeachstory1",cond:function(t){return 3===t.lifecounter}},{target:"tellbeachstory2",cond:function(t){return t.lifecounter<3}}]},tellbeachstory1:Object(r.a)({},f("You take a few steps forward to see more of your surroundings. To your left there's a stranded boat and to your right you see a few palm trees. Where do you go?")),tellbeachstory2:Object(r.a)({},f("You've been here before. You take a look at your surroundings. Do you go to the boat to the left or to the palm trees on the right?")),boat:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"Oh no! A shark was swimming right next to the boat. It attacks you and you don't survive. I told you it wasn't a beach...Too bad"})),Object(u.b)({lifecounter:function(t){return t.lifecounter-1}})],on:{ENDSPEECH:"#root.dm.endofgamebeach"}}}},palm_tree:{initial:"sayprompt",states:{sayprompt:{entry:[p((function(){return"Oh no! A coconut falls from one of the palm trees and hits you in the head. I told you it wasn't a beach. You should've listened to me. Too bad you didn't"})),Object(u.b)({lifecounter:function(t){return t.lifecounter-1}})],on:{ENDSPEECH:"#root.dm.endofgamebeach"}}}}}}}}}},O=o(160),w=o.n(O),T=o(163),C=o.n(T),R=o(13),S=c.a.send,N=c.a.cancel,I="northeurope";Object(l.a)({url:"https://statecharts.io/inspect",iframe:!1});var D=Object(i.a)({id:"root",type:"parallel",states:{dm:Object(r.a)({},j),asrtts:{initial:"init",states:{init:{on:{CLICK:{actions:[Object(u.b)({audioCtx:function(t){return new(window.AudioContext||window.webkitAudioContext)}}),function(t){return navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){t.audioCtx.createMediaStreamSource(e)}))}],target:"#root.asrtts.getToken"}}},getToken:{invoke:{src:function(t,e){return A()},id:"getAuthorizationToken",onDone:[{actions:[Object(u.b)((function(t,e){return{azureAuthorizationToken:e.data}})),"ponyfillASR"],target:"#root.asrtts.ponyfillTTS"}],onError:[{target:"#root.asrtts.fail"}]}},ponyfillTTS:{invoke:{src:function(t,e){return function(e,o){var n=C()({audioContext:t.audioCtx,credentials:{region:I,authorizationToken:t.azureAuthorizationToken}}),r=n.speechSynthesis,a=n.SpeechSynthesisUtterance;t.tts=r,t.ttsUtterance=a,t.tts.addEventListener("voiceschanged",(function(){t.tts.cancel();var o=t.tts.getVoices(),n=RegExp("en-US","u");n=RegExp("en-US","u");var r=o.find((function(t){return/Ryan/.test(t.name)}));r?(t.voice=r,e("TTS_READY")):(console.error("TTS_ERROR: Could not get voice for regexp ".concat(n)),e("TTS_ERROR"))}))}},id:"ponyTTS"},on:{TTS_READY:{target:"#root.asrtts.idle"},TTS_ERROR:{target:"#root.asrtts.fail"}}},idle:{on:{LISTEN:{target:"#root.asrtts.recognising"},SPEAK:{actions:Object(u.b)((function(t,e){return{ttsAgenda:e.value}})),target:"#root.asrtts.speaking"}}},recognising:{exit:"recStop",initial:"noinput",states:{noinput:{entry:["recStart",S({type:"TIMEOUT"},{delay:function(t){return 500*(t.tdmPassivity||10)},id:"timeout"})],exit:N("timeout"),on:{TIMEOUT:{target:"#root.asrtts.idle"},STARTSPEECH:{target:"#root.asrtts.recognising.inprogress"}}},inprogress:{},match:{entry:S("RECOGNISED")},pause:{entry:"recStop",on:{CLICK:{target:"#root.asrtts.recognising.noinput"}}}},on:{ASRRESULT:{actions:["recLogResult",Object(u.b)((function(t,e){return{recResult:e.value}}))],target:"#root.asrtts.recognising.match"},RECOGNISED:{target:"#root.asrtts.idle"},SELECT:{target:"#root.asrtts.idle"},CLICK:{target:"#root.asrtts.recognising.pause"}}},speaking:{entry:"ttsStart",exit:"ttsStop",on:{ENDSPEECH:{target:"#root.asrtts.idle"},SELECT:{target:"#root.asrtts.idle"},CLICK:{actions:S("ENDSPEECH"),target:"#root.asrtts.idle"}}},fail:{}}}}},{actions:{recLogResult:function(t){console.log("U>",t.recResult[0].utterance,t.recResult[0].confidence,t.recResult[0].background)},logIntent:function(t){console.log("<< NLU intent: "+t.nluData.intent.name)}}}),H=function(t){var e=((t.state.context.tdmVisualOutputInfo||[{}]).find((function(t){return"name"===t.attribute}))||{}).value,o=((t.state.context.tdmVisualOutputInfo||[{}]).find((function(t){return"image"===t.attribute}))||{}).value,n="circle";switch(!0){case t.state.matches({asrtts:"fail"})||t.state.matches({dm:"fail"}):break;case t.state.matches({asrtts:{recognising:"pause"}}):e="Click to continue";break;case t.state.matches({asrtts:"recognising"}):n="circle-recognising",e=e||"Listening...";break;case t.state.matches({asrtts:"speaking"}):n="circle-speaking",e=e||"Speaking...";break;case t.state.matches({dm:"idle"}):case t.state.matches({dm:"init"}):e="Welcome to the game! Click the circle to start",n="circle-click";break;default:e=e||"\xa0"}return Object(R.jsxs)("div",{className:"control",children:[Object(R.jsx)("figure",{className:"prompt",children:o&&Object(R.jsx)("img",{src:o,alt:e})}),Object(R.jsxs)("div",{className:"status",children:[Object(R.jsx)("button",Object(r.a)({type:"button",className:n,style:{}},t)),Object(R.jsx)("div",{className:"status-text",children:e})]})]})},P=function(t){var e=t.alternative.find((function(t){return"name"===t.attribute})).value,o=(t.alternative.find((function(t){return"image"===t.attribute}))||{}).value;return Object(R.jsxs)("figure",Object(r.a)(Object(r.a)({className:"flex"},t),{},{children:[o&&Object(R.jsx)("img",{src:o,alt:e}),Object(R.jsx)("figcaption",{children:e})]}))};function L(){var t=Object(s.b)(D,{devTools:!0,actions:{changeBackground:Object(s.a)((function(t){console.log(t.background),document.body.style.backgroundImage="url('".concat(t.background,"')")})),recStart:Object(s.a)((function(t){t.asr.start()})),recStop:Object(s.a)((function(t){t.asr.abort()})),ttsStart:Object(s.a)((function(t){var e='<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="http://www.w3.org/2001/mstts" xml:lang="en-US"><voice name="'.concat(t.voice.name,'">');e+='<lexicon uri="'.concat("https://emeaal.github.io/project_lt2216/lexicon.xml",'"/>'),e+="".concat(t.ttsAgenda,"</voice></speak>"),console.debug(e);var o=new t.ttsUtterance(t.ttsAgenda);console.log("S>",t.ttsAgenda),o.voice=t.voice,o.onend=function(){return r("ENDSPEECH")},t.tts.speak(o)})),ttsStop:Object(s.a)((function(t){t.tts.cancel()})),ponyfillASR:Object(s.a)((function(t,e){var o=w()({audioContext:t.audioCtx,credentials:{region:I,authorizationToken:t.azureAuthorizationToken}}).SpeechRecognition;t.asr=new o,t.asr.lang="en-US",t.asr.continuous=!0,t.asr.interimResults=!0,t.asr.onresult=function(t){var e=t.results[0];e.isFinal?r({type:"ASRRESULT",value:[{utterance:e[0].transcript,confidence:e[0].confidence,background:e[0].background}]}):r({type:"STARTSPEECH"})}}))}}),e=Object(n.a)(t,2),o=e[0],r=e[1],a=(o.context.tdmExpectedAlternatives||[]).filter((function(t){return t.visual_information})).map((function(t,e){return Object(R.jsx)(P,{state:o,alternative:t.visual_information,onClick:function(){return r({type:"SELECT",value:t.semantic_expression})}},e)}));return Object(R.jsxs)("div",{className:"App",children:[Object(R.jsx)(H,{state:o,alternative:{},onClick:function(){return r("CLICK")}}),Object(R.jsx)("div",{className:"select-wrapper",children:Object(R.jsx)("div",{className:"select",children:a})})]})}var A=function(){return fetch(new Request("https://northeurope.api.cognitive.microsoft.com/sts/v1.0/issuetoken",{method:"POST",headers:{"Ocp-Apim-Subscription-Key":"928be3e53ba647f8a9c0129ec3524237"}})).then((function(t){return t.text()}))},Y=document.getElementById("root");a.render(Object(R.jsx)(L,{}),Y)}},[[456,1,2]]]);
//# sourceMappingURL=main.5c0929f5.chunk.js.map